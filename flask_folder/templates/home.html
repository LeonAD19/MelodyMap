{% extends "layout.html" %}

{% block content %}
  <!-- Map background -->
  <div id="map"></div>
  <!-- Overlay elements -->
  <div class="overlay">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>
  
  <!-- Bottom-left user overlay -->
  <div id="user-card" class="user-card" aria-live="polite" aria-atomic="true">
    <div class="user-body">
      <img id="user-art" class="user-art" src="" alt="Album art" />
      <div class="user-info">
        <!-- <div class="user-user" id="user-user">Not logged in</div> -->
        <div class="user-title" id="user-title">Not playing</div>
        <div class="user-artists" id="user-artists"></div>
        <div class="user-progress">
          <div class="user-progress-bar">
            <div class="user-progress-fill" id="user-progress-fill" style="width:0%"></div>
          </div>
          <div class="user-times">
            <span id="user-current">0:00</span>
            <span id="user-duration">0:00</span>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
  <script>
    window.SPOTIFY_AUTH = {{ 'true' if user_auth else 'false' }};
  </script>
  <script src="{{ url_for('static', filename='js/map.js') }}"></script>
  <script src="{{ url_for('static', filename='js/user.js') }}"></script>
{% endblock %}
